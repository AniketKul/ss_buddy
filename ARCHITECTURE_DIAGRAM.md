# ğŸ—ï¸ Smart Study Buddy - High-Level Architecture

## ğŸŒ Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    CLIENT LAYER                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ Web Browser                    ğŸ“± Mobile App                    ğŸ”§ API Client      â”‚
â”‚  â”œâ”€â”€ JavaScript Frontend          â”œâ”€â”€ React Native                â”œâ”€â”€ curl/Postman    â”‚
â”‚  â”œâ”€â”€ Real-time Chat UI           â”œâ”€â”€ Mobile Interface            â”œâ”€â”€ Python requests â”‚
â”‚  â””â”€â”€ WebSocket Connection        â””â”€â”€ HTTP/HTTPS                  â””â”€â”€ REST API calls  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   NETWORK LAYER                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ Internet/Intranet             ğŸ”’ Load Balancer                ğŸ›¡ï¸ Firewall         â”‚
â”‚  â”œâ”€â”€ TCP/IP Routing              â”œâ”€â”€ HAProxy/Nginx               â”œâ”€â”€ iptables         â”‚
â”‚  â”œâ”€â”€ DNS Resolution              â”œâ”€â”€ SSL Termination             â”œâ”€â”€ UFW (disabled)   â”‚
â”‚  â””â”€â”€ 10.185.99.x Network         â””â”€â”€ Health Checks               â””â”€â”€ Security Rules   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼ Port 5000
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DPU SERVER (10.185.99.127)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                            FLASK APPLICATION LAYER                             â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  ğŸš€ Flask Web Server (study_buddy_app.py)                                     â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ ğŸ  Route: GET /                    â†’ Web Interface                       â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ ğŸ¯ Route: POST /api/query          â†’ Main Query Processing               â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ ğŸ“Š Route: GET /api/stats           â†’ Usage Statistics                    â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ â¤ï¸ Route: GET /api/health          â†’ Health Check                        â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ âš™ï¸ Route: GET /api/config          â†’ Configuration Info                  â”‚   â”‚
â”‚  â”‚  â””â”€â”€ ğŸ§ª Route: POST /api/test-router    â†’ Router Testing                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                           â”‚                                             â”‚
â”‚                                           â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                        NVIDIA ROUTER SERVICE LAYER                             â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  ğŸ§  NVIDIARouterService (nvidia_router_core.py)                               â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ ğŸ“š Educational Enhancement                                               â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Subject Detection    â†’ Mathematics, Science, CS, etc.               â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Difficulty Assessment â†’ Elementary â†’ Graduate                       â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Context Enrichment   â†’ Educational prompts                          â”‚   â”‚
â”‚  â”‚  â”‚                                                                           â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ ğŸ¯ NVIDIA LLM Router Core                                               â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Request Parsing      â†’ Extract nim-llm-router params               â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Policy Selection     â†’ task_router vs complexity_router            â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Message Processing   â†’ Convert to Triton format                    â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Response Handling    â†’ Parse and format results                    â”‚   â”‚
â”‚  â”‚  â”‚                                                                           â”‚   â”‚
â”‚  â”‚  â””â”€â”€ ğŸ“Š Statistics & Cost Tracking                                           â”‚   â”‚
â”‚  â”‚      â”œâ”€â”€ Query Metrics       â†’ Count, timing, subjects                      â”‚   â”‚
â”‚  â”‚      â”œâ”€â”€ Model Usage         â†’ Track which models used                      â”‚   â”‚
â”‚  â”‚      â””â”€â”€ Cost Calculation    â†’ Token-based pricing                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                           â”‚                                             â”‚
â”‚                                           â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                          LOCAL TRITON SERVER                                   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  ğŸ”¥ CPU-Only Triton Server (localhost:8000)                                   â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ ğŸ¯ Task Router Ensemble                                                  â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Model: task_router_ensemble                                         â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Input: User query text                                              â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Output: 12 class probabilities                                      â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Classes: Brainstorming, Chatbot, Classification, QA, etc.          â”‚   â”‚
â”‚  â”‚  â”‚                                                                           â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ ğŸ§  Complexity Router Ensemble                                           â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Model: complexity_router_ensemble                                   â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Input: User query text                                              â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ Output: 7 complexity probabilities                                  â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ Classes: Creativity, Reasoning, Knowledge, etc.                    â”‚   â”‚
â”‚  â”‚  â”‚                                                                           â”‚   â”‚
â”‚  â”‚  â””â”€â”€ ğŸ”§ Inference Engine                                                     â”‚   â”‚
â”‚  â”‚      â”œâ”€â”€ Backend: Python stub processes                                      â”‚   â”‚
â”‚  â”‚      â”œâ”€â”€ Protocol: HTTP REST API                                             â”‚   â”‚
â”‚  â”‚      â””â”€â”€ Endpoints: /v2/models/{model}/infer                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                              CONFIGURATION                                     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  ğŸ“„ nvidia_router_config.yaml                                                 â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Task Router Policy                                                       â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ URL: http://localhost:8000/v2/models/task_router_ensemble/infer     â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ 12 LLM Mappings                                                      â”‚   â”‚
â”‚  â”‚  â”‚                                                                           â”‚   â”‚
â”‚  â”‚  â”œâ”€â”€ Complexity Router Policy                                                 â”‚   â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ URL: http://localhost:8000/v2/models/complexity_router_ensemble/... â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€â”€ 7 LLM Mappings                                                       â”‚   â”‚
â”‚  â”‚  â”‚                                                                           â”‚   â”‚
â”‚  â”‚  â””â”€â”€ ğŸ”‘ Environment Variables (.env)                                          â”‚   â”‚
â”‚  â”‚      â”œâ”€â”€ NVIDIA_API_KEY                                                       â”‚   â”‚
â”‚  â”‚      â”œâ”€â”€ PORT=5000                                                            â”‚   â”‚
â”‚  â”‚      â””â”€â”€ SECRET_KEY                                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼ HTTPS API Call
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 NVIDIA CLOUD LAYER                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜ï¸ NVIDIA API Catalog (integrate.api.nvidia.com)                                     â”‚
â”‚  â”œâ”€â”€ ğŸ¦™ Meta Llama Models                                                              â”‚
â”‚  â”‚   â”œâ”€â”€ meta/llama-3.1-8b-instruct     â†’ Fast, efficient                           â”‚
â”‚  â”‚   â””â”€â”€ meta/llama-3.1-70b-instruct    â†’ High-quality reasoning                    â”‚
â”‚  â”‚                                                                                   â”‚
â”‚  â”œâ”€â”€ ğŸš€ NVIDIA Nemotron Models                                                        â”‚
â”‚  â”‚   â””â”€â”€ nvidia/llama-3.3-nemotron-super-49b-v1 â†’ Code generation                  â”‚
â”‚  â”‚                                                                                   â”‚
â”‚  â”œâ”€â”€ ğŸ­ Mistral Models                                                                â”‚
â”‚  â”‚   â””â”€â”€ mistralai/mixtral-8x22b-instruct-v0.1 â†’ Conversational                    â”‚
â”‚  â”‚                                                                                   â”‚
â”‚  â””â”€â”€ ğŸ”§ Infrastructure                                                                â”‚
â”‚      â”œâ”€â”€ GPU Clusters                                                                â”‚
â”‚      â”œâ”€â”€ Load Balancing                                                              â”‚
â”‚      â”œâ”€â”€ Auto-scaling                                                                â”‚
â”‚      â””â”€â”€ Rate Limiting                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Request Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLIENT    â”‚    â”‚   FLASK     â”‚    â”‚   ROUTER    â”‚    â”‚   TRITON    â”‚    â”‚   NVIDIA    â”‚
â”‚   BROWSER   â”‚    â”‚   SERVER    â”‚    â”‚   SERVICE   â”‚    â”‚   SERVER    â”‚    â”‚   CLOUD     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚                   â”‚
       â”‚ 1. POST /api/query â”‚                   â”‚                   â”‚                   â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚ 2. Educational    â”‚                   â”‚                   â”‚
       â”‚                   â”‚    Enhancement    â”‚                   â”‚                   â”‚
       â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚ 3. Classification â”‚                   â”‚
       â”‚                   â”‚                   â”‚    Request        â”‚                   â”‚
       â”‚                   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚ 4. Probabilities  â”‚                   â”‚
       â”‚                   â”‚                   â”‚    Response       â”‚                   â”‚
       â”‚                   â”‚                   â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚ 5. Model Selectionâ”‚                   â”‚
       â”‚                   â”‚                   â”‚    & API Call     â”‚                   â”‚
       â”‚                   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚
       â”‚                   â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚ 6. Generated      â”‚                   â”‚
       â”‚                   â”‚                   â”‚    Response       â”‚                   â”‚
       â”‚                   â”‚                   â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                   â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚ 7. Formatted      â”‚                   â”‚                   â”‚
       â”‚                   â”‚    Response       â”‚                   â”‚                   â”‚
       â”‚                   â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚                   â”‚
       â”‚ 8. JSON Response  â”‚                   â”‚                   â”‚                   â”‚
       â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚                   â”‚
```

## ğŸ¯ Model Selection Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              TASK ROUTER MAPPING                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Query Type          â”‚ Triton Class     â”‚ Selected Model                â”‚ Use Case        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  "Brainstorm ideas"  â”‚ Brainstorming    â”‚ meta/llama-3.1-70b-instruct  â”‚ Creative tasks  â”‚
â”‚  "Chat with me"      â”‚ Chatbot          â”‚ mixtral-8x22b-instruct-v0.1  â”‚ Conversation    â”‚
â”‚  "Categorize this"   â”‚ Classification   â”‚ meta/llama-3.1-8b-instruct   â”‚ Simple classify â”‚
â”‚  "What is X?"        â”‚ Closed QA        â”‚ meta/llama-3.1-70b-instruct  â”‚ Factual Q&A     â”‚
â”‚  "Write Python code" â”‚ Code Generation  â”‚ nemotron-super-49b-v1        â”‚ Programming     â”‚
â”‚  "Extract data"      â”‚ Extraction       â”‚ meta/llama-3.1-8b-instruct   â”‚ Data extraction â”‚
â”‚  "Explain concept"   â”‚ Open QA          â”‚ meta/llama-3.1-70b-instruct  â”‚ General Q&A     â”‚
â”‚  "Misc request"      â”‚ Other            â”‚ mixtral-8x22b-instruct-v0.1  â”‚ Miscellaneous   â”‚
â”‚  "Rewrite text"      â”‚ Rewrite          â”‚ meta/llama-3.1-8b-instruct   â”‚ Text editing    â”‚
â”‚  "Summarize this"    â”‚ Summarization    â”‚ meta/llama-3.1-70b-instruct  â”‚ Summarization   â”‚
â”‚  "Generate story"    â”‚ Text Generation  â”‚ mixtral-8x22b-instruct-v0.1  â”‚ Creative writingâ”‚
â”‚  "Unknown intent"    â”‚ Unknown          â”‚ meta/llama-3.1-8b-instruct   â”‚ Fallback        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 DATA FLOW                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                         â”‚
â”‚  ğŸ“ User Query: "How does machine learning work?"                                       â”‚
â”‚                                    â”‚                                                   â”‚
â”‚                                    â–¼                                                   â”‚
â”‚  ğŸ§  Educational Enhancement                                                             â”‚
â”‚  â”œâ”€â”€ Subject: "Computer Science"                                                       â”‚
â”‚  â”œâ”€â”€ Difficulty: "Elementary"                                                          â”‚
â”‚  â””â”€â”€ Enhanced Prompt: "You are a study buddy..."                                       â”‚
â”‚                                    â”‚                                                   â”‚
â”‚                                    â–¼                                                   â”‚
â”‚  ğŸ¯ Triton Classification                                                               â”‚
â”‚  â”œâ”€â”€ Input: "How does machine learning work?"                                          â”‚
â”‚  â”œâ”€â”€ Processing: task_router_ensemble model                                            â”‚
â”‚  â””â”€â”€ Output: [0.16, 0.18, 0.10, 0.001, 0.038, 0.096, 0.189, ...]                    â”‚
â”‚                                    â”‚                                                   â”‚
â”‚                                    â–¼                                                   â”‚
â”‚  ğŸ” Model Selection                                                                     â”‚
â”‚  â”œâ”€â”€ Highest Probability: Index 6 (0.189)                                             â”‚
â”‚  â”œâ”€â”€ Selected Class: "Open QA"                                                         â”‚
â”‚  â””â”€â”€ Chosen Model: "meta/llama-3.1-70b-instruct"                                      â”‚
â”‚                                    â”‚                                                   â”‚
â”‚                                    â–¼                                                   â”‚
â”‚  â˜ï¸ NVIDIA API Call                                                                    â”‚
â”‚  â”œâ”€â”€ URL: https://integrate.api.nvidia.com/v1/chat/completions                        â”‚
â”‚  â”œâ”€â”€ Model: meta/llama-3.1-70b-instruct                                               â”‚
â”‚  â”œâ”€â”€ Headers: Authorization: Bearer ${NVIDIA_API_KEY}                                  â”‚
â”‚  â””â”€â”€ Body: {"model": "meta/llama-3.1-70b-instruct", "messages": [...]}               â”‚
â”‚                                    â”‚                                                   â”‚
â”‚                                    â–¼                                                   â”‚
â”‚  ğŸ“¤ Response Processing                                                                 â”‚
â”‚  â”œâ”€â”€ Generated Text: "Machine learning is a subset of AI..."                          â”‚
â”‚  â”œâ”€â”€ Usage: {"prompt_tokens": 45, "completion_tokens": 294}                           â”‚
â”‚  â”œâ”€â”€ Cost: $0.0002 * 45/1000 + $0.0006 * 294/1000 = $0.000185                      â”‚
â”‚  â””â”€â”€ Response Time: 3.18 seconds                                                       â”‚
â”‚                                    â”‚                                                   â”‚
â”‚                                    â–¼                                                   â”‚
â”‚  ğŸ“Š Final JSON Response                                                                 â”‚
â”‚  {                                                                                     â”‚
â”‚    "response": "Machine learning is a subset of AI...",                               â”‚
â”‚    "model_used": "meta/llama-3.1-70b-instruct",                                       â”‚
â”‚    "classifier_used": "Open QA",                                                       â”‚
â”‚    "policy_used": "task_router",                                                       â”‚
â”‚    "routing_strategy": "triton",                                                       â”‚
â”‚    "detected_subject": "Computer Science",                                             â”‚
â”‚    "detected_difficulty": "Elementary",                                                â”‚
â”‚    "response_time": 3.18,                                                              â”‚
â”‚    "usage": {...}                                                                      â”‚
â”‚  }                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               TECHNOLOGY STACK                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer              â”‚ Technology                    â”‚ Purpose                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸŒ Frontend         â”‚ HTML5, CSS3, JavaScript      â”‚ User Interface                    â”‚
â”‚  ğŸš€ Web Framework    â”‚ Flask (Python)               â”‚ HTTP Server & API                 â”‚
â”‚  ğŸ§  AI Routing       â”‚ NVIDIA LLM Router            â”‚ Intelligent Model Selection       â”‚
â”‚  ğŸ”¥ Local Inference  â”‚ Triton Inference Server      â”‚ CPU-only Classification           â”‚
â”‚  â˜ï¸ Cloud LLMs       â”‚ NVIDIA API Catalog           â”‚ Text Generation                   â”‚
â”‚  ğŸ“Š Data Storage     â”‚ JSON Files                   â”‚ Statistics & Configuration        â”‚
â”‚  ğŸ”§ Configuration    â”‚ YAML, Environment Variables  â”‚ System Configuration              â”‚
â”‚  ğŸ Programming      â”‚ Python 3.10+                â”‚ Main Application Logic            â”‚
â”‚  ğŸ“¦ Dependencies     â”‚ pip, requirements.txt        â”‚ Package Management                â”‚
â”‚  ğŸ³ Containerizationâ”‚ Docker (optional)            â”‚ Deployment                        â”‚
â”‚  ğŸŒ Networking       â”‚ HTTP/HTTPS, REST APIs       â”‚ Communication                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Key Architectural Benefits

1. **ğŸ”¥ Local Intelligence**: DPU handles all routing decisions
2. **â˜ï¸ Cloud Scale**: Leverages NVIDIA's powerful models
3. **ğŸ’° Cost Optimized**: Right-sized models for each task
4. **âš¡ Performance**: Parallel processing and efficient routing
5. **ğŸ›¡ï¸ Resilient**: Graceful error handling and fallbacks
6. **ğŸ“Š Observable**: Comprehensive metrics and monitoring
7. **ğŸ”§ Configurable**: Easy to modify models and policies
8. **ğŸ“ Educational**: Context-aware responses for learning

This architecture provides the perfect balance of local control and cloud capabilities! ğŸš€ 